-- ==================================================
-- 한빛학사 데이터베이스 및 테이블 생성·관리 예제
-- 이 파일은 데이터베이스 생성, 테이블 정의, 계산 칼럼, 
-- 빈 테이블 복제, 데이터 삽입 및 조회 과정을 단계별로 보여줍니다.
-- ==================================================

---------------------------------------------------------
-- 1) 데이터베이스 생성 및 사용
-- 목적: 한빛학사라는 새 데이터베이스를 만들고 선택
CREATE DATABASE 한빛학사;
USE 한빛학사;

---------------------------------------------------------
-- 2) 학과 테이블 생성 및 초기 데이터 삽입
-- 목적: 학과 정보를 저장할 테이블 정의 및 예시 데이터 삽입
CREATE TABLE 학과
(
    학과번호   CHAR(2),
    학과명     VARCHAR(20),
    학과장명   VARCHAR(20)
);
INSERT INTO 학과
VALUES
    ('AA', '컴퓨터공학과',     '배경민'),
    ('BB', '소프트웨어학과',   '김남준'),
    ('CC', '디자인융합학과',   '박선영');
SELECT * FROM 학과;
/*
[예상결과]
----------------------------------------
| 학과번호 | 학과명         | 학과장명  |
----------------------------------------
| AA       | 컴퓨터공학과   | 배경민    |
| BB       | 소프트웨어학과 | 김남준    |
| CC       | 디자인융합학과 | 박선영    |
----------------------------------------
*/

---------------------------------------------------------
-- 3) 학생 테이블 생성 및 데이터 삽입
-- 목적: 학생 정보를 저장할 테이블 정의 및 예시 데이터 삽입
CREATE TABLE 학생
(
    학번       CHAR(5),
    이름       VARCHAR(20),
    생일       DATE,
    연락처     VARCHAR(20),
    학과번호   CHAR(2)
);
INSERT INTO 학생
VALUES
    ('S0001', '이윤주', '2020-01-30', '01033334444', 'AA'),
    ('S0002', '이승은', '2021-02-23', NULL,            'AA'),
    ('S0003', '백재용', '2018-03-31', '01077778888', 'DD');
SELECT * FROM 학생;
/*
[예상결과]
-------------------------------------------------------------
| 학번   | 이름   | 생일        | 연락처         | 학과번호 |
-------------------------------------------------------------
| S0001 | 이윤주 | 2020-01-30  | 01033334444    | AA       |
| S0002 | 이승은 | 2021-02-23  | NULL           | AA       |
| S0003 | 백재용 | 2018-03-31  | 01077778888    | DD       |
-------------------------------------------------------------
*/

---------------------------------------------------------
-- 4) 휴학생 테이블 복제 (빈 테이블 생성)
-- 목적: 학생 테이블 구조만 복제하되 데이터는 비움
CREATE TABLE 휴학생 AS
    SELECT *
    FROM 학생
    WHERE 1 = 2;
SELECT * FROM 휴학생;
/*
[예상결과]
-- 컬럼은 학생 테이블과 동일, 데이터 행은 없음
*/

---------------------------------------------------------
-- 5) 회원 테이블 생성 (계산 칼럼 포함) 및 데이터 삽입
-- 목적: 키와 몸무게로 체질량지수(BMI)를 자동 계산하는 계산 칼럼 정의
CREATE TABLE 회원
(
    아이디       VARCHAR(20) PRIMARY KEY,
    회원명       VARCHAR(20),
    키           INT,
    몸무게       INT,
    체질량지수   DECIMAL(4,1) AS (몸무게 / POWER(키 / 100, 2)) STORED
);
INSERT INTO 회원(아이디, 회원명, 키, 몸무게)
VALUES('APPLE', '김사과', 178, 70);
SELECT * FROM 회원;
/*
[예상결과]
---------------------------------------------------------------
| 아이디 | 회원명 | 키  | 몸무게 | 체질량지수                 |
---------------------------------------------------------------
| APPLE  | 김사과 | 178 | 70     | 22.1  (70/1.78² ≈ 22.1)  |
---------------------------------------------------------------
*/
