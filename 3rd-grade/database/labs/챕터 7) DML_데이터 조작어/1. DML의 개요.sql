-- ==================================================
-- DML 연습 예제 정리
-- 이 파일은 INSERT, UPDATE, DELETE 및 UPSERT 예제를 포함합니다.
-- 각 섹션마다 목적과 예상 결과를 주석으로 설명합니다.
-- ==================================================

---------------------------------------------------------
-- [INSERT 예제 1] 부서 테이블에 새 부서 추가
-- 목적: 부서 코드 A5에 ‘마케팅부’를 추가
INSERT INTO 부서
VALUES('A5', '마케팅부');
SELECT * FROM 부서;
/*
[예상결과]
----------------------------
| 부서번호 | 부서명       |
----------------------------
| A1       | 영업부       |
| A2       | 기술부       |
| A3       | 인사부       |
| A4       | 재무부       |
| A5       | 마케팅부     |
----------------------------
*/

---------------------------------------------------------
-- [INSERT 예제 2] 제품 테이블에 새 제품 추가 (NULL 컬럼 포함)
-- 목적: 모든 컬럼을 순서대로 지정하여 ’연어피클소스’를 추가
INSERT INTO 제품
VALUES(91, '연어피클소스', NULL, 5000, 40);
SELECT * FROM 제품;
/*
[예상결과 일부]
-------------------------------------------------------------------------------
| 제품번호 | 제품명         | 포장단위 | 단가  | 재고 |
-------------------------------------------------------------------------------
| ...      | ...            | ...      | ...   | ...  |
| 91       | 연어피클소스   | NULL     | 5000  | 40   |
-------------------------------------------------------------------------------
*/

---------------------------------------------------------
-- [INSERT 예제 3] 지정 컬럼만 INSERT
-- 목적: 컬럼 목록을 명시하고 ’연어핫소스’를 추가
INSERT INTO 제품(제품번호, 제품명, 단가, 재고)
VALUES(90, '연어핫소스', 4000, 50);
SELECT * FROM 제품;
/*
[예상결과 일부]
-------------------------------------------------------------------------------
| 제품번호 | 제품명         | 포장단위 | 단가  | 재고 |
-------------------------------------------------------------------------------
| 90       | 연어핫소스     | NULL     | 4000  | 50   |
| 91       | 연어피클소스   | NULL     | 5000  | 40   |
-------------------------------------------------------------------------------
*/

---------------------------------------------------------
-- [INSERT 예제 4] 다중 행 INSERT
-- 목적: 사원 테이블에 세 명의 수습사원을 한 번에 추가
INSERT INTO 사원(사원번호, 이름, 직위, 성별, 입사일)
VALUES
  ('E20', '김사과', '수습사원', '남', CURDATE()),
  ('E21', '박바나나', '수습사원', '여', CURDATE()),
  ('E22', '정오렌지', '수습사원', '여', CURDATE());
SELECT * FROM 사원;
/*
[예상결과 일부]
----------------------------------------------------------
| 사원번호 | 이름     | 직위     | 성별 | 입사일       |
----------------------------------------------------------
| ...      | ...      | ...      | ...  | ...          |
| E20      | 김사과   | 수습사원 | 남   | 2025-05-12   |
| E21      | 박바나나 | 수습사원 | 여   | 2025-05-12   |
| E22      | 정오렌지 | 수습사원 | 여   | 2025-05-12   |
----------------------------------------------------------
*/

---------------------------------------------------------
-- [UPDATE 예제 1] 사원 이름 갱신
-- 목적: 방금 추가한 E20의 이름을 ‘김레몬’으로 변경
UPDATE 사원
SET 이름 = '김레몬'
WHERE 사원번호 = 'E20';
SELECT * FROM 사원;
/*
[예상결과 변경 행]
----------------------------------------------------------
| 사원번호 | 이름     | 직위     | 성별 | 입사일       |
----------------------------------------------------------
| E20      | 김레몬   | 수습사원 | 남   | 2025-05-12   |
----------------------------------------------------------
*/

---------------------------------------------------------
-- [UPDATE 예제 2] 제품 포장단위 갱신
-- 목적: 제품번호 91의 포장단위를 ‘200 ml bottles’로 설정
UPDATE 제품
SET 포장단위 = '200 ml bottles'
WHERE 제품번호 = 91;
SELECT * FROM 제품;
/*
[예상결과 변경 행]
-------------------------------------------------------------------------------
| 제품번호 | 제품명         | 포장단위          | 단가  | 재고 |
-------------------------------------------------------------------------------
| 91       | 연어피클소스   | 200 ml bottles    | 5000  | 40   |
-------------------------------------------------------------------------------
*/

---------------------------------------------------------
-- [UPDATE 예제 3] 제품 단가 및 재고 동시 변경
-- 목적: 제품번호 91의 단가를 10% 인상하고 재고를 10개 차감
UPDATE 제품
SET 단가 = 단가 * 1.1,
    재고 = 재고 - 10
WHERE 제품번호 = 91;
SELECT * FROM 제품;
/*
[예상결과 변경 행]
-------------------------------------------------------------------------------
| 제품번호 | 제품명         | 포장단위          | 단가   | 재고 |
-------------------------------------------------------------------------------
| 91       | 연어피클소스   | 200 ml bottles    | 5500   | 30   |
-------------------------------------------------------------------------------
*/

---------------------------------------------------------
-- [DELETE 예제 1] 특정 제품 삭제
-- 목적: 테스트용으로 추가했던 제품번호 91을 삭제
DELETE FROM 제품
WHERE 제품번호 = 91;
SELECT * FROM 제품;
/*
[예상결과]
-- 제품번호 91이 더 이상 조회되지 않음
*/

---------------------------------------------------------
-- [DELETE 예제 2] 최근 입사 사원 3명 삭제
-- 목적: 입사일 기준 내림차순으로 상위 3명을 제거
DELETE FROM 사원
ORDER BY 입사일 DESC
LIMIT 3;
-- (동일 결과) WHERE 이름 IN ('김레몬', '박바나나', '정오렌지')
SELECT * FROM 사원;
/*
[예상결과]
-- E20, E21, E22 레코드가 사원 테이블에서 제거됨
*/

---------------------------------------------------------
-- [UPSERT 예제] ON DUPLICATE KEY UPDATE
-- 목적: 제품번호 91이 없으면 INSERT, 있으면 UPDATE
INSERT INTO 제품(제품번호, 제품명, 단가, 재고)
VALUES(91, '연어피클핫소스', 6000, 50)
ON DUPLICATE KEY UPDATE
    제품명 = '연어피클핫소스',
    단가   = 6000,
    재고   = 50;
SELECT * FROM 제품;
/*
[예상결과]
-------------------------------------------------------------------------------
| 제품번호 | 제품명            | 포장단위          | 단가  | 재고 |
-------------------------------------------------------------------------------
| 91       | 연어피클핫소스    | NULL or existing | 6000  | 50   |
-------------------------------------------------------------------------------
*/
